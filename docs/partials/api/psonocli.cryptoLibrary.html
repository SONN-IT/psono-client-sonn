<h1><code ng:non-bindable="">cryptoLibrary</code>
<div><span class="hint">service in module <code ng:non-bindable="">psonocli</code>
</span>
</div>
</h1>
<div><h2 id="description">Description</h2>
<div class="description"><div class="psonocli-cryptolibrary-page"><p>Service with all the cryptographic operations</p>
</div></div>
<div class="member method"><h2 id="methods">Methods</h2>
<ul class="methods"><li><h3 id="methods_decode_latin1">decode_latin1(to_decode)</h3>
<div class="decode_latin1"><div class="psonocli-cryptolibrary-decode-latin1-page"><p>decodes latin1 from nacl_factory.js</p>
</div><h5 id="methods_decode_latin1_parameters">Parameters</h5><table class="variables-matrix table table-bordered table-striped"><thead><tr><th>Param</th><th>Type</th><th>Details</th></tr></thead><tbody><tr><td>to_decode</td><td><a href="" class="label type-hint type-hint-string">string</a></td><td><div class="psonocli-cryptolibrary-decode-latin1-page"><p>encoded latin1 string</p>
</div></td></tr></tbody></table><h5 id="methods_decode_latin1_returns">Returns</h5><table class="variables-matrix"><tr><td><a href="" class="label type-hint type-hint-string">string</a></td><td><div class="psonocli-cryptolibrary-decode-latin1-page"><p>Decoded string</p>
</div></td></tr></table></div>
</li>
<li><h3 id="methods_decode_utf8">decode_utf8(to_decode)</h3>
<div class="decode_utf8"><div class="psonocli-cryptolibrary-decode-utf8-page"><p>decodes utf8 from nacl_factory.js</p>
</div><h5 id="methods_decode_utf8_parameters">Parameters</h5><table class="variables-matrix table table-bordered table-striped"><thead><tr><th>Param</th><th>Type</th><th>Details</th></tr></thead><tbody><tr><td>to_decode</td><td><a href="" class="label type-hint type-hint-string">string</a></td><td><div class="psonocli-cryptolibrary-decode-utf8-page"><p>encoded utf-8 string</p>
</div></td></tr></tbody></table><h5 id="methods_decode_utf8_returns">Returns</h5><table class="variables-matrix"><tr><td><a href="" class="label type-hint type-hint-string">string</a></td><td><div class="psonocli-cryptolibrary-decode-utf8-page"><p>Decoded string</p>
</div></td></tr></table></div>
</li>
<li><h3 id="methods_decrypt_data">decrypt_data(text, nonce, secret_key)</h3>
<div class="decrypt_data"><div class="psonocli-cryptolibrary-decrypt-data-page"><p>Takes the cipher text and decrypts that with the nonce and the secret_key.
Returns the initial data.</p>
</div><h5 id="methods_decrypt_data_parameters">Parameters</h5><table class="variables-matrix table table-bordered table-striped"><thead><tr><th>Param</th><th>Type</th><th>Details</th></tr></thead><tbody><tr><td>text</td><td><a href="" class="label type-hint type-hint-string">string</a></td><td><div class="psonocli-cryptolibrary-decrypt-data-page"><p>The encrypted text</p>
</div></td></tr><tr><td>nonce</td><td><a href="" class="label type-hint type-hint-string">string</a></td><td><div class="psonocli-cryptolibrary-decrypt-data-page"><p>The nonce of the encrypted text</p>
</div></td></tr><tr><td>secret_key</td><td><a href="" class="label type-hint type-hint-string">string</a></td><td><div class="psonocli-cryptolibrary-decrypt-data-page"><p>The secret key used in the past to encrypt the text</p>
</div></td></tr></tbody></table><h5 id="methods_decrypt_data_returns">Returns</h5><table class="variables-matrix"><tr><td><a href="" class="label type-hint type-hint-string">string</a></td><td><div class="psonocli-cryptolibrary-decrypt-data-page"><p>The decrypted data</p>
</div></td></tr></table></div>
</li>
<li><h3 id="methods_decrypt_data_public_key">decrypt_data_public_key(text, nonce, public_key, private_key)</h3>
<div class="decrypt_data_public_key"><div class="psonocli-cryptolibrary-decrypt-data-public-key-page"><p>Takes the cipher text and decrypts that with the nonce, the senders public key and users private key.
Returns the initial data.</p>
</div><h5 id="methods_decrypt_data_public_key_parameters">Parameters</h5><table class="variables-matrix table table-bordered table-striped"><thead><tr><th>Param</th><th>Type</th><th>Details</th></tr></thead><tbody><tr><td>text</td><td><a href="" class="label type-hint type-hint-string">string</a></td><td><div class="psonocli-cryptolibrary-decrypt-data-public-key-page"><p>The encrypted text</p>
</div></td></tr><tr><td>nonce</td><td><a href="" class="label type-hint type-hint-string">string</a></td><td><div class="psonocli-cryptolibrary-decrypt-data-public-key-page"><p>The nonce that belongs to the encrypted text</p>
</div></td></tr><tr><td>public_key</td><td><a href="" class="label type-hint type-hint-string">string</a></td><td><div class="psonocli-cryptolibrary-decrypt-data-public-key-page"><p>The pulic key you want to use to decrypt the text</p>
</div></td></tr><tr><td>private_key</td><td><a href="" class="label type-hint type-hint-string">string</a></td><td><div class="psonocli-cryptolibrary-decrypt-data-public-key-page"><p>The private key you want to use to encrypt the text</p>
</div></td></tr></tbody></table><h5 id="methods_decrypt_data_public_key_returns">Returns</h5><table class="variables-matrix"><tr><td><a href="" class="label type-hint type-hint-string">string</a></td><td><div class="psonocli-cryptolibrary-decrypt-data-public-key-page"><p>The decrypted data</p>
</div></td></tr></table></div>
</li>
<li><h3 id="methods_decrypt_data_public_key">decrypt_data_public_key()</h3>
<div class="decrypt_data_public_key"><div class="psonocli-cryptolibrary-decrypt-data-public-key-page"><p>returns a 32 bytes long random hex value to be used as the user special sauce</p>
</div><h5 id="methods_decrypt_data_public_key_returns">Returns</h5><table class="variables-matrix"><tr><td><a href="" class="label type-hint type-hint-string">string</a></td><td><div class="psonocli-cryptolibrary-decrypt-data-public-key-page"><p>Returns a random user sauce (32 bytes, hex encoded)</p>
</div></td></tr></table></div>
</li>
<li><h3 id="methods_decrypt_secret">decrypt_secret(text, nonce, password, user_sauce)</h3>
<div class="decrypt_secret"><div class="psonocli-cryptolibrary-decrypt-secret-page"><p>Takes the cipher text and decrypts that with the nonce and the sha256(password+user_sauce).
Returns the initial secret.</p>
</div><h5 id="methods_decrypt_secret_parameters">Parameters</h5><table class="variables-matrix table table-bordered table-striped"><thead><tr><th>Param</th><th>Type</th><th>Details</th></tr></thead><tbody><tr><td>text</td><td><a href="" class="label type-hint type-hint-string">string</a></td><td><div class="psonocli-cryptolibrary-decrypt-secret-page"><p>The encrypted text</p>
</div></td></tr><tr><td>nonce</td><td><a href="" class="label type-hint type-hint-string">string</a></td><td><div class="psonocli-cryptolibrary-decrypt-secret-page"><p>The nonce for the encrypted text</p>
</div></td></tr><tr><td>password</td><td><a href="" class="label type-hint type-hint-string">string</a></td><td><div class="psonocli-cryptolibrary-decrypt-secret-page"><p>The password to decrypt the text</p>
</div></td></tr><tr><td>user_sauce</td><td><a href="" class="label type-hint type-hint-string">string</a></td><td><div class="psonocli-cryptolibrary-decrypt-secret-page"><p>The users sauce used during encryption</p>
</div></td></tr></tbody></table><h5 id="methods_decrypt_secret_returns">Returns</h5><table class="variables-matrix"><tr><td><a href="" class="label type-hint type-hint-string">string</a></td><td><div class="psonocli-cryptolibrary-decrypt-secret-page"><p>secret The decrypted secret</p>
</div></td></tr></table></div>
</li>
<li><h3 id="methods_encode_latin1">encode_latin1(to_encode)</h3>
<div class="encode_latin1"><div class="psonocli-cryptolibrary-encode-latin1-page"><p>encodes latin1 from nacl_factory.js</p>
</div><h5 id="methods_encode_latin1_parameters">Parameters</h5><table class="variables-matrix table table-bordered table-striped"><thead><tr><th>Param</th><th>Type</th><th>Details</th></tr></thead><tbody><tr><td>to_encode</td><td><a href="" class="label type-hint type-hint-string">string</a></td><td><div class="psonocli-cryptolibrary-encode-latin1-page"><p>String to encode</p>
</div></td></tr></tbody></table><h5 id="methods_encode_latin1_returns">Returns</h5><table class="variables-matrix"><tr><td><a href="" class="label type-hint type-hint-string">string</a></td><td><div class="psonocli-cryptolibrary-encode-latin1-page"><p>Encoded string</p>
</div></td></tr></table></div>
</li>
<li><h3 id="methods_encode_utf8">encode_utf8(to_encode)</h3>
<div class="encode_utf8"><div class="psonocli-cryptolibrary-encode-utf8-page"><p>encodes utf8 from nacl_factory.js</p>
</div><h5 id="methods_encode_utf8_parameters">Parameters</h5><table class="variables-matrix table table-bordered table-striped"><thead><tr><th>Param</th><th>Type</th><th>Details</th></tr></thead><tbody><tr><td>to_encode</td><td><a href="" class="label type-hint type-hint-string">string</a></td><td><div class="psonocli-cryptolibrary-encode-utf8-page"><p>String to encode</p>
</div></td></tr></tbody></table><h5 id="methods_encode_utf8_returns">Returns</h5><table class="variables-matrix"><tr><td><a href="" class="label type-hint type-hint-string">string</a></td><td><div class="psonocli-cryptolibrary-encode-utf8-page"><p>Encoded string</p>
</div></td></tr></table></div>
</li>
<li><h3 id="methods_encrypt_data">encrypt_data(data, secret_key)</h3>
<div class="encrypt_data"><div class="psonocli-cryptolibrary-encrypt-data-page"><p>Takes the data and the secret_key as hex and encrypts the data.
Returns the nonce and the cipher text as hex.</p>
</div><h5 id="methods_encrypt_data_parameters">Parameters</h5><table class="variables-matrix table table-bordered table-striped"><thead><tr><th>Param</th><th>Type</th><th>Details</th></tr></thead><tbody><tr><td>data</td><td><a href="" class="label type-hint type-hint-string">string</a></td><td><div class="psonocli-cryptolibrary-encrypt-data-page"><p>The data you want to encrypt</p>
</div></td></tr><tr><td>secret_key</td><td><a href="" class="label type-hint type-hint-string">string</a></td><td><div class="psonocli-cryptolibrary-encrypt-data-page"><p>The secret key you want to use to encrypt the data</p>
</div></td></tr></tbody></table><h5 id="methods_encrypt_data_returns">Returns</h5><table class="variables-matrix"><tr><td><a href="" class="label type-hint type-hint-encryptedvalue">EncryptedValue</a></td><td><div class="psonocli-cryptolibrary-encrypt-data-page"><p>The encrypted text and the nonce</p>
</div></td></tr></table></div>
</li>
<li><h3 id="methods_encrypt_data_public_key">encrypt_data_public_key(data, public_key, private_key)</h3>
<div class="encrypt_data_public_key"><div class="psonocli-cryptolibrary-encrypt-data-public-key-page"><p>Takes the data and encrypts that with a random nonce, the receivers public key and users private key.
Returns the nonce and the cipher text as hex.</p>
</div><h5 id="methods_encrypt_data_public_key_parameters">Parameters</h5><table class="variables-matrix table table-bordered table-striped"><thead><tr><th>Param</th><th>Type</th><th>Details</th></tr></thead><tbody><tr><td>data</td><td><a href="" class="label type-hint type-hint-string">string</a></td><td><div class="psonocli-cryptolibrary-encrypt-data-public-key-page"><p>The data you want to encrypt</p>
</div></td></tr><tr><td>public_key</td><td><a href="" class="label type-hint type-hint-string">string</a></td><td><div class="psonocli-cryptolibrary-encrypt-data-public-key-page"><p>The public key you want to use for the encryption</p>
</div></td></tr><tr><td>private_key</td><td><a href="" class="label type-hint type-hint-string">string</a></td><td><div class="psonocli-cryptolibrary-encrypt-data-public-key-page"><p>The private key you want to use for the encryption</p>
</div></td></tr></tbody></table><h5 id="methods_encrypt_data_public_key_returns">Returns</h5><table class="variables-matrix"><tr><td><a href="" class="label type-hint type-hint-encryptedvalue">EncryptedValue</a></td><td><div class="psonocli-cryptolibrary-encrypt-data-public-key-page"><p>The encrypted text and the nonce</p>
</div></td></tr></table></div>
</li>
<li><h3 id="methods_encrypt_secret">encrypt_secret(secret, password, user_sauce)</h3>
<div class="encrypt_secret"><div class="psonocli-cryptolibrary-encrypt-secret-page"><p>Takes the secret and encrypts that with the provided password. The crypto_box takes only 256 bits, therefore we
are using sha256(password+user_sauce) as key for encryption.
Returns the nonce and the cipher text as hex.</p>
</div><h5 id="methods_encrypt_secret_parameters">Parameters</h5><table class="variables-matrix table table-bordered table-striped"><thead><tr><th>Param</th><th>Type</th><th>Details</th></tr></thead><tbody><tr><td>secret</td><td><a href="" class="label type-hint type-hint-string">string</a></td><td><div class="psonocli-cryptolibrary-encrypt-secret-page"><p>The secret you want to encrypt</p>
</div></td></tr><tr><td>password</td><td><a href="" class="label type-hint type-hint-string">string</a></td><td><div class="psonocli-cryptolibrary-encrypt-secret-page"><p>The password you want to use to encrypt the secret</p>
</div></td></tr><tr><td>user_sauce</td><td><a href="" class="label type-hint type-hint-string">string</a></td><td><div class="psonocli-cryptolibrary-encrypt-secret-page"><p>The user&#39;s sauce</p>
</div></td></tr></tbody></table><h5 id="methods_encrypt_secret_returns">Returns</h5><table class="variables-matrix"><tr><td><a href="" class="label type-hint type-hint-encryptedvalue">EncryptedValue</a></td><td><div class="psonocli-cryptolibrary-encrypt-secret-page"><p>The encrypted text and the nonce</p>
</div></td></tr></table></div>
</li>
<li><h3 id="methods_from_hex">from_hex(val)</h3>
<div class="from_hex"><div class="psonocli-cryptolibrary-from-hex-page"><p>hex to Uint8Array converter from nacl_factory.js</p>
</div><h5 id="methods_from_hex_parameters">Parameters</h5><table class="variables-matrix table table-bordered table-striped"><thead><tr><th>Param</th><th>Type</th><th>Details</th></tr></thead><tbody><tr><td>val</td><td><a href="" class="label type-hint type-hint-string">string</a></td><td><div class="psonocli-cryptolibrary-from-hex-page"><p>As hex encoded value</p>
</div></td></tr></tbody></table><h5 id="methods_from_hex_returns">Returns</h5><table class="variables-matrix"><tr><td><a href="" class="label type-hint type-hint-uint8array">Uint8Array</a></td><td><div class="psonocli-cryptolibrary-from-hex-page"><p>Returns Uint8Array representation</p>
</div></td></tr></table></div>
</li>
<li><h3 id="methods_generate_authkey">generate_authkey(username, password)</h3>
<div class="generate_authkey"><div class="psonocli-cryptolibrary-generate-authkey-page"><p>takes the sha512 of lowercase username as salt to generate scrypt password hash in hex called
the authkey, so basically:</p>
<p>hex(scrypt(password, hex(sha512(lower(username)))))</p>
<p>For compatibility reasons with other clients please use the following parameters if you create your own client:</p>
<p>var n = 16384 // 2^14;
var r = 8;
var p = 1;
var l = 64;</p>
</div><h5 id="methods_generate_authkey_parameters">Parameters</h5><table class="variables-matrix table table-bordered table-striped"><thead><tr><th>Param</th><th>Type</th><th>Details</th></tr></thead><tbody><tr><td>username</td><td><a href="" class="label type-hint type-hint-string">string</a></td><td><div class="psonocli-cryptolibrary-generate-authkey-page"><p>Username of the user (in email format)</p>
</div></td></tr><tr><td>password</td><td><a href="" class="label type-hint type-hint-string">string</a></td><td><div class="psonocli-cryptolibrary-generate-authkey-page"><p>Password of the user</p>
</div></td></tr></tbody></table><h5 id="methods_generate_authkey_returns">Returns</h5><table class="variables-matrix"><tr><td><a href="" class="label type-hint type-hint-string">string</a></td><td><div class="psonocli-cryptolibrary-generate-authkey-page"><p>auth_key Scrypt hex value of the password with the sha512 of lowercase email as salt</p>
</div></td></tr></table></div>
</li>
<li><h3 id="methods_generate_public_private_keypair">generate_public_private_keypair()</h3>
<div class="generate_public_private_keypair"><div class="psonocli-cryptolibrary-generate-public-private-keypair-page"><p>generates public and private key pair
All keys are 32 Bytes or 256 Bits long and represented as hex</p>
</div><h5 id="methods_generate_public_private_keypair_returns">Returns</h5><table class="variables-matrix"><tr><td><a href="" class="label type-hint type-hint-publicprivatekeypair">PublicPrivateKeyPair</a></td><td><div class="psonocli-cryptolibrary-generate-public-private-keypair-page"><p>Returns object with a public-private-key-pair</p>
</div></td></tr></table></div>
</li>
<li><h3 id="methods_generate_secret_key">generate_secret_key()</h3>
<div class="generate_secret_key"><div class="psonocli-cryptolibrary-generate-secret-key-page"><p>generates secret keys that is 32 Bytes or 256 Bits long and represented as hex</p>
</div><h5 id="methods_generate_secret_key_returns">Returns</h5><table class="variables-matrix"><tr><td><a href="" class="label type-hint type-hint-string">string</a></td><td><div class="psonocli-cryptolibrary-generate-secret-key-page"><p>Returns secret key (hex encoded, 32 byte long)</p>
</div></td></tr></table></div>
</li>
<li><h3 id="methods_randombytes">randomBytes(count)</h3>
<div class="randombytes"><div class="psonocli-cryptolibrary-randombytes-page"><p>Random byte generator from nacl_factory.js</p>
</div><h5 id="methods_randombytes_parameters">Parameters</h5><table class="variables-matrix table table-bordered table-striped"><thead><tr><th>Param</th><th>Type</th><th>Details</th></tr></thead><tbody><tr><td>count</td><td><a href="" class="label type-hint type-hint-number">number</a></td><td><div class="psonocli-cryptolibrary-randombytes-page"><p>The amount of random bytes to return</p>
</div></td></tr></tbody></table><h5 id="methods_randombytes_returns">Returns</h5><table class="variables-matrix"><tr><td><a href="" class="label type-hint type-hint-uint8array">Uint8Array</a></td><td><div class="psonocli-cryptolibrary-randombytes-page"><p>Random byte array</p>
</div></td></tr></table></div>
</li>
<li><h3 id="methods_to_hex">to_hex(val)</h3>
<div class="to_hex"><div class="psonocli-cryptolibrary-to-hex-page"><p>Uint8Array to hex converter from nacl_factory.js</p>
</div><h5 id="methods_to_hex_parameters">Parameters</h5><table class="variables-matrix table table-bordered table-striped"><thead><tr><th>Param</th><th>Type</th><th>Details</th></tr></thead><tbody><tr><td>val</td><td><a href="" class="label type-hint type-hint-uint8array">Uint8Array</a></td><td><div class="psonocli-cryptolibrary-to-hex-page"><p>As Uint8Array encoded value</p>
</div></td></tr></tbody></table><h5 id="methods_to_hex_returns">Returns</h5><table class="variables-matrix"><tr><td><a href="" class="label type-hint type-hint-string">string</a></td><td><div class="psonocli-cryptolibrary-to-hex-page"><p>Returns hex representation</p>
</div></td></tr></table></div>
</li>
</ul>
</div>
</div>
